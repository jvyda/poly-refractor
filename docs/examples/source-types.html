<html>
	<head>
		<style>
			body {
				position: absolute;
				width: 100%; height: 100%;
				top: 0; left: 0;
				margin: 0; padding: 0;
				background: black;
				color: white;
				font-family: sans-serif;
			}
			poly-refractor {
				position: absolute;
				top: 0; left: 0;
				width: 100%; height: 100%;
			}
			.sources {
				position: absolute;
				z-index: 1;
			}
			.sources * {
				width: 200px; height: 200px;
				object-fit: contain;
				cursor: pointer;
			}
		</style>
	</head>
	<body>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/x-tag/1.5.11/x-tag-core.js'></script>
		<script src='../poly-refractor.js'></script>
		<poly-refractor
			cells-x='9' cells-y='9'
			cell-generator='diamond'
			offset-factor='4'
			src="./assets/p-crawl.mp4"
			></poly-refractor>
		
		<div class="sources">
			<video src="./assets/pub.mp4" loop controls></video>
			<img src="./assets/pop.jpg">
			<img hidden src="./assets/al.jpg">
			<canvas width='1080' height='1080'></canvas>
		</div>

		<script>
			
			var refractor = document.querySelector('poly-refractor')
			window.addEventListener('resize', refractor.resize.bind(refractor))
			
			var video = document.querySelector('video')
			video.addEventListener('play', function(){
				refractor.src = video
			})
			video.addEventListener('click', function(){
				if(video.paused) video.play()
				else video.pause()
			})


			var img = document.querySelector('img')
			img.addEventListener('click', function(){
				refractor.src = img
			})

			var canvas = document.querySelector('.sources canvas')
			canvas.addEventListener('click', function(){
				refractor.src = canvas
			})
			var ctx = canvas.getContext('2d')
			ctx.drawImage(document.querySelector('img[hidden]'), 0, 0, canvas.width, canvas.height)

		</script>

		<a href="https://github.com/positlabs/poly-refractor" target='_blank' style='position: absolute; right: 0; top: 0; z-index: 1000;'><img src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>

		<a target='_blank' style="position: absolute; bottom: 10px; text-align: center; display: inline-block; z-index: 1000; color: white; width: 100%;" href="https://github.com/positlabs/poly-refractor/blob/master/docs/examples/source-types.html" class="view-source">VIEW SOURCE</a>
	</body>
</html>