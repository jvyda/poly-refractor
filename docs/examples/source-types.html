<html>
	<head>
		<style>
			body {
				position: absolute;
				width: 100%; height: 100%;
				top: 0; left: 0;
				margin: 0; padding: 0;
				background: black;
				color: white;
				font-family: sans-serif;
			}
			poly-refractor {
				position: absolute;
				top: 0; left: 0;
				width: 100%; height: 100%;
			}
			.sources {
				position: absolute;
				z-index: 1;
			}
			.sources * {
				width: 200px; height: 200px;
				object-fit: contain;
				cursor: pointer;
			}
		</style>
	</head>
	<body>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/x-tag/1.5.11/x-tag-core.js'></script>
		<script src='../poly-refractor.js'></script>
		<poly-refractor
			cells-x='9' cells-y='9'
			cell-generator='diamond'
			offset-factor='200'
			src="./assets/pub.mp4"
			></poly-refractor>
		
		<div class="sources">
			<video src="./assets/pub.mp4" loop controls></video>
			<img src="./assets/pop.jpg">
			<img hidden src="./assets/al.jpg">
			<canvas width='200' height='200'></canvas>
		</div>

		<script>
			
			var refractor = document.querySelector('poly-refractor')
			
			var video = document.querySelector('video')
			video.addEventListener('play', function(){
				refractor.src = video
			})

			var img = document.querySelector('img')
			img.addEventListener('click', function(){
				refractor.src = img
			})

			var canvas = document.querySelector('.sources canvas')
			canvas.addEventListener('click', function(){
				refractor.src = canvas
			})
			var ctx = canvas.getContext('2d')
			ctx.drawImage(document.querySelector('img[hidden]'), 0, 0, 200, 200)


		</script>
	</body>
</html>